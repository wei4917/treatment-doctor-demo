webpackJsonp([7],{Qesk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("tB5l");var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"containerBox"},[e._m(0),e._v(" "),a("div",{staticClass:"formBox"},[a("el-form",{ref:"treatmentForm",attrs:{rules:e.rules,model:e.treatmentParams,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预设处方"}},[a("el-select",{attrs:{placeholder:"请选择处方"},on:{change:e.selectPs},model:{value:e.treatmentParams.presetPsId,callback:function(t){e.$set(e.treatmentParams,"presetPsId",t)},expression:"treatmentParams.presetPsId"}},e._l(e.psList,function(e){return a("el-option",{key:e.psId,attrs:{label:e.psName,value:e.psId}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"阳极区",prop:"anode"}},[a("el-input",{attrs:{placeholder:"请输入阳极区"},model:{value:e.treatmentParams.anode,callback:function(t){e.$set(e.treatmentParams,"anode",t)},expression:"treatmentParams.anode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"阴极区",prop:"cathode"}},[a("el-input",{attrs:{placeholder:"请输入阴极区"},model:{value:e.treatmentParams.cathode,callback:function(t){e.$set(e.treatmentParams,"cathode",t)},expression:"treatmentParams.cathode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电流",prop:"current"}},[a("el-input",{attrs:{placeholder:"请输入电流"},model:{value:e.treatmentParams.current,callback:function(t){e.$set(e.treatmentParams,"current",e._n(t))},expression:"treatmentParams.current"}},[a("template",{slot:"append"},[e._v("微安/μA")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时长",prop:"duration"}},[a("el-input",{attrs:{placeholder:"请输入时长"},model:{value:e.treatmentParams.duration,callback:function(t){e.$set(e.treatmentParams,"duration",e._n(t))},expression:"treatmentParams.duration"}},[a("template",{slot:"append"},[e._v("分钟/min")])],2)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"刺激周期"}},[a("el-radio-group",{model:{value:e.cycleMode,callback:function(t){e.cycleMode=t},expression:"cycleMode"}},[a("el-radio",{attrs:{label:1}},[e._v("每天")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("间隔 "),a("el-input-number",{attrs:{size:"small",min:1,max:99},model:{value:e.customCycle,callback:function(t){e.customCycle=t},expression:"customCycle"}}),e._v(" 天")],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"刺激时间",prop:"time"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"选择刺激时间"},model:{value:e.treatmentParams.time,callback:function(t){e.$set(e.treatmentParams,"time",t)},expression:"treatmentParams.time"}})],1)],1)],1),e._v(" "),a("el-divider"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.back}},[e._v("返回")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pageTopic"},[t("span",{staticClass:"topicName"},[this._v("治疗方案设置")])])}]};var s=a("VU/8")({data:function(){return{treatmentParams:{caseId:"",presetPsId:"",anode:"",cathode:"",current:"",duration:"",cycle:"",time:""},psList:[],cycleMode:1,customCycle:1,rules:{anode:[{required:!0,message:"请输入阳极区",trigger:"blur"}],cathode:[{required:!0,message:"请输入阴极区",trigger:"blur"}],current:[{required:!0,type:"number",message:"请输入正确电流值",trigger:"blur"}],duration:[{required:!0,type:"number",message:"请输入正确时长值",trigger:"blur"}],time:[{required:!0,message:"请输入时间",trigger:"blur"}]}}},created:function(){var e=this.$route.params.caseId;this.initTreatmentData(e),this.psList=this.$db.psList()},methods:{initTreatmentData:function(e){var t=this.$db.treatment(e);t?(this.treatmentParams=t,t.cycle>1&&(this.cycleMode=2,this.customCycle=t.cycle-1)):this.treatmentParams.caseId=e},selectPs:function(e){var t=this.$db.ps(e);this.treatmentParams.presetPsId=e,this.treatmentParams.anode=t.psAnode,this.treatmentParams.cathode=t.psCathode,this.treatmentParams.current=t.psCurrent,this.treatmentParams.duration=t.psDuration,this.$forceUpdate()},save:function(){var e=this;this.$refs.treatmentForm.validate(function(t){if(!t)return!1;1===e.cycleMode?e.treatmentParams.cycle=1:e.cycleMode>1&&(e.treatmentParams.cycle=e.customCycle+1),e.$db.saveTreatment(e.treatmentParams),e.$modal.alert("保存成功"),e.back()})}}},r,!1,function(e){a("Vx0s")},null,null);t.default=s.exports},Vx0s:function(e,t){}});
//# sourceMappingURL=7.608f4dbe178f959c857f.js.map