webpackJsonp([7],{"JO+3":function(e,t){},Qesk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),s=a.n(r),n=(a("tB5l"),{data:function(){return{treatmentParams:{caseId:"",presetPsId:"",anode:"",cathode:"",current:"",duration:"",cycle:"",timeInterval:[]},psList:[],rules:{anode:[{required:!0,message:"请输入阳极区",trigger:"blur"}],cathode:[{required:!0,message:"请输入阴极区",trigger:"blur"}],current:[{required:!0,type:"number",message:"请输入电流",trigger:"blur"}],duration:[{required:!0,type:"number",message:"请输入时长",trigger:"blur"}],timeInterval:[{required:!0,type:"array",message:"请输入刺激时间区间",trigger:"change"}]}}},created:function(){var e=this.$route.params.caseId;this.initTreatmentData(e),this.psList=this.$db.psList()},methods:{initTreatmentData:function(e){var t=this.$db.newestTreatmentFromCase(e);t?this.treatmentParams=s()(t,{timeInterval:[t.beginInterval,t.endInterval]}):this.treatmentParams.caseId=e},selectPs:function(e){var t=this.$db.ps(e);this.treatmentParams.presetPsId=e,this.treatmentParams.anode=t.psAnode,this.treatmentParams.cathode=t.psCathode,this.treatmentParams.current=t.psCurrent,this.treatmentParams.duration=t.psDuration,this.$forceUpdate()},save:function(){var e=this;this.$refs.treatmentForm.validate(function(t){if(!t)return!1;e.treatmentParams.beginInterval=e.treatmentParams.timeInterval[0],e.treatmentParams.endInterval=e.treatmentParams.timeInterval[1],delete e.treatmentParams.timeInterval,e.$db.saveTreatment(e.treatmentParams),e.$modal.alert("保存成功"),e.back()})}}}),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"containerBox"},[e._m(0),e._v(" "),a("div",{staticClass:"formBox"},[a("el-form",{ref:"treatmentForm",attrs:{rules:e.rules,model:e.treatmentParams,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预设处方"}},[a("el-select",{attrs:{placeholder:"请选择处方"},on:{change:e.selectPs},model:{value:e.treatmentParams.presetPsId,callback:function(t){e.$set(e.treatmentParams,"presetPsId",t)},expression:"treatmentParams.presetPsId"}},e._l(e.psList,function(e){return a("el-option",{key:e.psId,attrs:{label:e.psName,value:e.psId}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"阳极区",prop:"anode"}},[a("el-input",{attrs:{placeholder:"请输入阳极区"},model:{value:e.treatmentParams.anode,callback:function(t){e.$set(e.treatmentParams,"anode",t)},expression:"treatmentParams.anode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"阴极区",prop:"cathode","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入阴极区"},model:{value:e.treatmentParams.cathode,callback:function(t){e.$set(e.treatmentParams,"cathode",t)},expression:"treatmentParams.cathode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电流",prop:"current"}},[a("el-input",{attrs:{placeholder:"请输入电流"},model:{value:e.treatmentParams.current,callback:function(t){e.$set(e.treatmentParams,"current",e._n(t))},expression:"treatmentParams.current"}},[a("template",{slot:"append"},[e._v("微安/μA")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时长",prop:"duration","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入时长"},model:{value:e.treatmentParams.duration,callback:function(t){e.$set(e.treatmentParams,"duration",e._n(t))},expression:"treatmentParams.duration"}},[a("template",{slot:"append"},[e._v("分钟/min")])],2)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"刺激日期",prop:""}},[a("el-date-picker",{attrs:{type:"dates",placeholder:"选择一个或多个日期"},model:{value:e.treatmentParams.cycle,callback:function(t){e.$set(e.treatmentParams,"cycle",t)},expression:"treatmentParams.cycle"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"刺激时间区间",prop:"timeInterval","label-width":"120px"}},[a("el-time-picker",{attrs:{"is-range":"","value-format":"HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.treatmentParams.timeInterval,callback:function(t){e.$set(e.treatmentParams,"timeInterval",t)},expression:"treatmentParams.timeInterval"}})],1)],1)],1),e._v(" "),a("el-divider"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.back}},[e._v("返回")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pageTopic"},[t("span",{staticClass:"topicName"},[this._v("治疗方案设置")])])}]};var m=a("VU/8")(n,l,!1,function(e){a("JO+3")},null,null);t.default=m.exports}});
//# sourceMappingURL=7.4f86e4186d941c10778c.js.map